# Example toolchanger-config.cfg
# This is a reference example showing the homing_override configuration
# Copy the relevant sections to your actual stealthchanger/toolchanger-config.cfg
# DO NOT use this file directly - it's an example only

# This example shows sensorless X homing with switch Y homing
# Adjust the G28 commands based on your specific setup:
# - For switch-based X: G28 X (requires physical endstop configured in [stepper_x])
# - For sensorless X: G28 X (requires TMC driver with virtual_endstop configured)
# - For switch-based Y: G28 Y (requires physical endstop configured in [stepper_y])
# - For sensorless Y: G28 Y (requires TMC driver with virtual_endstop and homing_retract_dist: 0)

[homing_override]
axes: xyz
set_position_x: 0
set_position_y: 0
gcode:
    # Home X axis (sensorless or switch - adjust based on your configuration)
    G28 X
    
    # Home Y axis (sensorless or switch - adjust based on your configuration)
    G28 Y
    
    # Ensure a tool is on the shuttle before Z homing
    # Z homing uses the tool probe (OctoTap) on the active tool
    # The tool probe is configured in each tool's config file (stealthchanger/tools/Tx.cfg)
    G28 Z
    
    # Quad Gantry Leveling (QGL) - levels the gantry using the tool probe
    # This ensures the gantry is level before printing
    QUAD_GANTRY_LEVEL
    
    # Re-home Z after QGL to account for any gantry movement during leveling
    G28 Z

# Optional: Calibration switch configuration
# Uncomment and configure if using a calibration probe (Sexball, Nudge, etc.)
# This enables automatic tool offset calibration routines
# [_CALIBRATION_SWITCH]
# pin: ^ar21  # Replace with your calibration probe endstop pin
#        # Common pins: ^ar21, ^ar22, ^ar23, etc. (adjust to your setup)

# NOTE: This file only shows the homing_override section
# Your actual toolchanger-config.cfg will have many other sections
# including [toolchanger], [tool T0], [tool T1], etc.

